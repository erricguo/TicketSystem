(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("b-card-code",{attrs:{title:"使用者列表"}},[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],on:{click:function(t){e.modalShow=!e.modalShow}}},[o("span",[e._v("新增")])]),o("div",{staticClass:"custom-search d-flex justify-content-end"},[o("b-form-group",[o("div",{staticClass:"d-flex align-items-center"},[o("label",{staticClass:"mr-1",staticStyle:{"min-width":"max-content"}},[e._v("查詢")]),o("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"Search",type:"text"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}})],1)])],1),o("vue-good-table",{attrs:{columns:e.columns,rows:e.rows,"search-options":{enabled:!0,externalQuery:e.searchTerm},"pagination-options":{enabled:!0,perPage:e.pageLength}},scopedSlots:e._u([{key:"table-row",fn:function(t){return["action"===t.column.field?o("span",[o("span",[o("b-button",{staticClass:"mr-50",attrs:{variant:"gradient-primary"},on:{click:function(o){return e.editRow(t)}}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"Edit2Icon"}}),o("span",[e._v("編輯")])],1),o("b-button",{attrs:{variant:"gradient-danger"}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"TrashIcon"}}),o("span",[e._v("刪除")])],1)],1)]):o("span",[e._v(" "+e._s(t.formattedRow[t.column.field])+" ")])]}},{key:"pagination-bottom",fn:function(t){return[o("div",{staticClass:"d-flex justify-content-between flex-wrap"},[o("div",{staticClass:"d-flex align-items-center mb-0 mt-1"},[o("span",{staticClass:"text-nowrap "},[e._v(" Showing 1 to ")]),o("b-form-select",{staticClass:"mx-1",attrs:{options:["10","20","50"]},on:{input:function(e){return t.perPageChanged({currentPerPage:e})}},model:{value:e.pageLength,callback:function(t){e.pageLength=t},expression:"pageLength"}}),o("span",{staticClass:"text-nowrap"},[e._v(" of "+e._s(t.total)+" entries ")])],1),o("div",[o("b-pagination",{staticClass:"mt-1 mb-0",attrs:{value:1,"total-rows":t.total,"per-page":e.pageLength,"first-number":"","last-number":"",align:"right","prev-class":"prev-item","next-class":"next-item"},on:{input:function(e){return t.pageChanged({currentPage:e})}},scopedSlots:e._u([{key:"prev-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!0)})],1)])]}}])})],1),o("b-modal",{attrs:{centered:""},on:{ok:e.onSubmit},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[o("b-card-code",{attrs:{title:"新增使用者"}},[o("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[o("b-form-group",{attrs:{id:"input-group-2",label:"Email","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",type:"email",placeholder:"",required:""},model:{value:e.modalform.Email,callback:function(t){e.$set(e.modalform,"Email",t)},expression:"modalform.Email"}})],1),o("b-form-group",{attrs:{id:"input-group-1",label:"帳號:","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",placeholder:"",required:""},model:{value:e.modalform.Eid,callback:function(t){e.$set(e.modalform,"Eid",t)},expression:"modalform.Eid"}})],1),o("b-form-group",{attrs:{id:"input-group-3",label:"密碼","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3",type:"password",placeholder:"",required:""},model:{value:e.modalform.Pwd,callback:function(t){e.$set(e.modalform,"Pwd",t)},expression:"modalform.Pwd"}})],1),o("b-form-group",{attrs:{id:"input-group-4",label:"姓名:","label-for":"input-4"}},[o("b-form-input",{attrs:{id:"input-4",placeholder:"",required:""},model:{value:e.modalform.UserName,callback:function(t){e.$set(e.modalform,"UserName",t)},expression:"modalform.UserName"}})],1),o("b-form-group",{attrs:{id:"input-group-5",label:"用戶角色:","label-for":"input-5"}},[o("b-form-select",{attrs:{id:"input-5",options:e.selectRole,required:""},model:{value:e.modalform.RoleTid,callback:function(t){e.$set(e.modalform,"RoleTid",t)},expression:"modalform.RoleTid"}})],1)],1)],1)],1),o("b-modal",{attrs:{centered:""},on:{ok:e.onEdit},model:{value:e.editModalShow,callback:function(t){e.editModalShow=t},expression:"editModalShow"}},[o("b-card-code",{attrs:{title:"修改使用者"}},[o("b-form",{on:{reset:e.onReset}},[o("b-form-group",{attrs:{id:"input-group-2",label:"Email","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",type:"email",placeholder:"",required:""},model:{value:e.editModalform.Email,callback:function(t){e.$set(e.editModalform,"Email",t)},expression:"editModalform.Email"}})],1),o("b-form-group",{attrs:{id:"input-group-1",label:"帳號:","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",placeholder:"",required:""},model:{value:e.editModalform.Eid,callback:function(t){e.$set(e.editModalform,"Eid",t)},expression:"editModalform.Eid"}})],1),o("b-form-group",{attrs:{id:"input-group-3",label:"密碼","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3",type:"password",placeholder:"",required:""},model:{value:e.editModalform.Pwd,callback:function(t){e.$set(e.editModalform,"Pwd",t)},expression:"editModalform.Pwd"}})],1),o("b-form-group",{attrs:{id:"input-group-4",label:"姓名:","label-for":"input-4"}},[o("b-form-input",{attrs:{id:"input-4",placeholder:"",required:""},model:{value:e.editModalform.UserName,callback:function(t){e.$set(e.editModalform,"UserName",t)},expression:"editModalform.UserName"}})],1),o("b-form-group",{attrs:{id:"input-group-5",label:"用戶角色:","label-for":"input-5"}},[o("b-form-select",{attrs:{id:"input-5",options:e.selectRole,required:""},model:{value:e.editModalform.RoleTid,callback:function(t){e.$set(e.editModalform,"RoleTid",t)},expression:"editModalform.RoleTid"}})],1)],1)],1)],1)],1)},r=[],i=(o("d3b7"),o("159b"),o("541c")),l=o("1947"),n=o("e8a3"),s=o("e98b"),d=o("26d2"),u=o("11de"),m=o("8226"),c=o("4797"),p=o("8361"),f=o("dd9a"),b=o("9eaa"),h=o("f617"),g=(o("4360"),o("42ea"));o("3e84");var w={components:{BCardCode:i["a"],VueGoodTable:h["a"],BButton:l["a"],BAvatar:n["a"],BBadge:s["a"],BPagination:d["a"],BForm:u["a"],BFormGroup:m["a"],BFormInput:c["a"],BFormSelect:p["a"],BDropdown:f["a"],BDropdownItem:b["a"]},data:function(){return{pageLength:10,columns:[{label:"帳號",field:"users.eid"},{label:"姓名",field:"users.userName"},{label:"角色",field:"roles.roleName"},{label:"操作",field:"action"}],rows:[],searchTerm:"",modalShow:!1,editModalShow:!1,modalform:{Eid:"",Email:"",Pwd:"",UserName:"",RoleTid:""},editModalform:{Tid:"",Eid:"",Email:"",Pwd:"",UserName:"",RoleTid:""},selectRole:[{text:"請選擇角色",value:null}],currentEditId:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;g["a"].get("/api/Users").then((function(t){e.rows=t.data.uvm,e.selectRole.length<=1&&t.data.roles.forEach((function(t){e.selectRole.push({value:t.tid,text:t.roleName})}))})).catch((function(e){}))},onSubmit:function(e){var t=this;e.preventDefault(),g["a"].post("api/Users",this.modalform).then((function(e){t.modalShow=!1,t.onReset(),t.getUserList(),t.$swal.fire("提示","新增成功!","success")})).catch((function(e){}))},onEdit:function(e){var t=this;e.preventDefault(),g["a"].put("api/Users/"+this.editModalform.Tid,this.editModalform).then((function(e){t.editModalShow=!1,t.onReset(),t.getUserList()})).catch((function(e){}))},onReset:function(){this.modalform=this.$options.data().modalform},editRow:function(e){this.editModalShow=!this.editModalShow,this.editModalform.Tid=e.row.users.tid,this.editModalform.Eid=e.row.users.eid,this.editModalform.UserName=e.row.users.userName,this.editModalform.Email=e.row.users.email,this.editModalform.RoleTid=e.row.users.roleTid,this.editModalform.Pwd=e.row.users.pwd}}},v=w,x=o("2877"),M=Object(x["a"])(v,a,r,!1,null,null,null);t["default"]=M.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.aa45d8fb.js.map