(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5670df41"],{"25f0":function(t,e,o){"use strict";var i=o("6eeb"),r=o("825a"),a=o("d039"),n=o("ad6d"),s="toString",l=RegExp.prototype,c=l[s],d=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=s;(d||u)&&i(RegExp.prototype,s,(function(){var t=r(this),e=String(t.source),o=t.flags,i=String(void 0===o&&t instanceof RegExp&&!("flags"in l)?n.call(t):o);return"/"+e+"/"+i}),{unsafe:!0})},"8fc2":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-card-code",{attrs:{title:"案件列表"}},[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}},{name:"show",rawName:"v-show",value:t.checkRole("add"),expression:"checkRole('add')"}],on:{click:t.onNew}},[o("span",[t._v("新增")])]),o("div",{staticClass:"custom-search d-flex justify-content-end"},[o("b-form-group",[o("div",{staticClass:"d-flex align-items-center"},[o("label",{staticClass:"mr-1",staticStyle:{"min-width":"max-content"}},[t._v("查詢")]),o("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"Search",type:"text"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1)])],1),o("vue-good-table",{attrs:{columns:t.columns,rows:t.rows,"search-options":{enabled:!0,externalQuery:t.searchTerm},"pagination-options":{enabled:!0,perPage:t.pageLength}},scopedSlots:t._u([{key:"table-row",fn:function(e){return["action"===e.column.field?o("span",[o("span",[o("b-button",{directives:[{name:"show",rawName:"v-show",value:t.checkRole("edit"),expression:"checkRole('edit')"}],staticClass:"mr-50",attrs:{variant:"gradient-primary"},on:{click:function(o){return t.editRow(e,"edit")}}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"Edit2Icon"}}),o("span",[t._v("編輯")])],1),o("b-button",{directives:[{name:"show",rawName:"v-show",value:t.checkRole("handle"),expression:"checkRole('handle')"}],staticClass:"mr-50",attrs:{variant:"gradient-secondary"},on:{click:function(o){return t.editRow(e,"handle")}}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"Edit2Icon"}}),o("span",[t._v("接單")])],1),o("b-button",{directives:[{name:"show",rawName:"v-show",value:t.checkRole("finish"),expression:"checkRole('finish')"}],staticClass:"mr-50",attrs:{variant:"gradient-success"},on:{click:function(o){return t.editRow(e,"finish")}}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"Edit2Icon"}}),o("span",[t._v("結案")])],1),o("b-button",{directives:[{name:"show",rawName:"v-show",value:t.checkRole("delete"),expression:"checkRole('delete')"}],attrs:{variant:"gradient-danger"},on:{click:function(o){return t.deleteRow(e)}}},[o("feather-icon",{staticClass:"mr-50",attrs:{icon:"TrashIcon"}}),o("span",[t._v("刪除")])],1)],1)]):o("span",[t._v(" "+t._s(e.formattedRow[e.column.field])+" ")])]}},{key:"pagination-bottom",fn:function(e){return[o("div",{staticClass:"d-flex justify-content-between flex-wrap"},[o("div",{staticClass:"d-flex align-items-center mb-0 mt-1"},[o("span",{staticClass:"text-nowrap "},[t._v(" Showing 1 to ")]),o("b-form-select",{staticClass:"mx-1",attrs:{options:["10","20","50"]},on:{input:function(t){return e.perPageChanged({currentPerPage:t})}},model:{value:t.pageLength,callback:function(e){t.pageLength=e},expression:"pageLength"}}),o("span",{staticClass:"text-nowrap"},[t._v(" of "+t._s(e.total)+" entries ")])],1),o("div",[o("b-pagination",{staticClass:"mt-1 mb-0",attrs:{value:1,"total-rows":e.total,"per-page":t.pageLength,"first-number":"","last-number":"",align:"right","prev-class":"prev-item","next-class":"next-item"},on:{input:function(t){return e.pageChanged({currentPage:t})}},scopedSlots:t._u([{key:"prev-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[o("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!0)})],1)])]}}])})],1),o("b-modal",{attrs:{centered:""},on:{ok:t.onSubmit},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[o("b-card-code",{attrs:{title:"新增案件"}},[o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-1",label:"單別","label-for":"input-1"}},[o("b-form-select",{attrs:{id:"input-1",options:t.selectType,required:""},model:{value:t.modalform.ticketType,callback:function(e){t.$set(t.modalform,"ticketType",e)},expression:"modalform.ticketType"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"摘要","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.modalform.summary,callback:function(e){t.$set(t.modalform,"summary",e)},expression:"modalform.summary"}})],1),o("b-form-group",{attrs:{id:"input-group-3",label:"描述","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3"},model:{value:t.modalform.description,callback:function(e){t.$set(t.modalform,"description",e)},expression:"modalform.description"}})],1),o("b-form-group",{attrs:{id:"input-group-4",label:"建立者","label-for":"input-4"}},[o("b-form-input",{attrs:{id:"input-4",required:""},model:{value:t.modalform.creator,callback:function(e){t.$set(t.modalform,"creator",e)},expression:"modalform.creator"}})],1),o("b-form-group",{attrs:{id:"input-group-5",label:"狀態","label-for":"input-5"}},[o("b-form-select",{attrs:{id:"input-5",options:t.selectStatus,required:"",disabled:""},model:{value:t.modalform.ticketStatus,callback:function(e){t.$set(t.modalform,"ticketStatus",e)},expression:"modalform.ticketStatus"}})],1),o("b-form-group",{attrs:{id:"input-group-6",label:"嚴重性","label-for":"input-6"}},[o("b-form-select",{attrs:{id:"input-6",options:t.selectSevere,required:""},model:{value:t.modalform.ticketSevere,callback:function(e){t.$set(t.modalform,"ticketSevere",e)},expression:"modalform.ticketSevere"}})],1),o("b-form-group",{attrs:{id:"input-group-7",label:"優先程度","label-for":"input-7"}},[o("b-form-select",{attrs:{id:"input-7",options:t.selectPriority,required:""},model:{value:t.modalform.ticketPriority,callback:function(e){t.$set(t.modalform,"ticketPriority",e)},expression:"modalform.ticketPriority"}})],1)],1)],1)],1),o("b-modal",{attrs:{centered:""},on:{ok:t.onEdit},model:{value:t.editModalShow,callback:function(e){t.editModalShow=e},expression:"editModalShow"}},[o("b-card-code",{attrs:{title:"新增案件"}},[o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-1",label:"單別","label-for":"input-1"}},[o("b-form-select",{attrs:{id:"input-1",options:t.selectType,required:""},model:{value:t.editModalform.ticketType,callback:function(e){t.$set(t.editModalform,"ticketType",e)},expression:"editModalform.ticketType"}})],1),o("b-form-group",{attrs:{id:"input-group-2",label:"摘要","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.editModalform.summary,callback:function(e){t.$set(t.editModalform,"summary",e)},expression:"editModalform.summary"}})],1),o("b-form-group",{attrs:{id:"input-group-3",label:"描述","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3"},model:{value:t.editModalform.description,callback:function(e){t.$set(t.editModalform,"description",e)},expression:"editModalform.description"}})],1),o("b-form-group",{attrs:{id:"input-group-4",label:"建立者","label-for":"input-4"}},[o("b-form-input",{attrs:{id:"input-4",required:""},model:{value:t.editModalform.creator,callback:function(e){t.$set(t.editModalform,"creator",e)},expression:"editModalform.creator"}})],1),o("b-form-group",{attrs:{id:"input-group-5",label:"狀態","label-for":"input-5"}},[o("b-form-select",{attrs:{id:"input-5",options:t.selectStatus,required:"",disabled:""},model:{value:t.editModalform.ticketStatus,callback:function(e){t.$set(t.editModalform,"ticketStatus",e)},expression:"editModalform.ticketStatus"}})],1),o("b-form-group",{attrs:{id:"input-group-6",label:"嚴重性","label-for":"input-6"}},[o("b-form-select",{attrs:{id:"input-6",options:t.selectSevere,required:""},model:{value:t.editModalform.ticketSevere,callback:function(e){t.$set(t.editModalform,"ticketSevere",e)},expression:"editModalform.ticketSevere"}})],1),o("b-form-group",{attrs:{id:"input-group-7",label:"優先程度","label-for":"input-7"}},[o("b-form-select",{attrs:{id:"input-7",options:t.selectPriority,required:""},model:{value:t.editModalform.ticketPriority,callback:function(e){t.$set(t.editModalform,"ticketPriority",e)},expression:"editModalform.ticketPriority"}})],1)],1)],1)],1)],1)},r=[],a=(o("d81d"),o("d3b7"),o("159b"),o("25f0"),o("a4d3"),o("e01a"),o("541c")),n=o("1947"),s=o("e8a3"),l=o("e98b"),c=o("26d2"),d=o("11de"),u=o("8226"),m=o("4797"),f=o("8361"),p=o("dd9a"),b=o("9eaa"),h=o("f617"),v=o("4360"),k=o("42ea");o("3e84");var g={components:{BCardCode:a["a"],VueGoodTable:h["a"],BButton:n["a"],BAvatar:s["a"],BBadge:l["a"],BPagination:c["a"],BForm:d["a"],BFormGroup:u["a"],BFormInput:m["a"],BFormSelect:f["a"],BDropdown:p["a"],BDropdownItem:b["a"]},data:function(){return{pageLength:10,columns:[{label:"建立日期",field:"createDate"},{label:"單別",field:"ticketType",formatFn:this.formatType},{label:"單號",field:"ticketId"},{label:"摘要",field:"summary"},{label:"描述",field:"description"},{label:"建立者",field:"creator"},{label:"狀態",field:"ticketStatus",formatFn:this.formatStatus},{label:"嚴重性",field:"ticketSevere",formatFn:this.formatSevere},{label:"優先程度",field:"ticketPriority",formatFn:this.formatPriority},{label:"操作",field:"action"}],rows:[],searchTerm:"",modalShow:!1,editModalShow:!1,modalform:{ticketType:"",summary:"",description:"",creator:"",ticketStatus:"",ticketSevere:"",ticketPriority:""},editModalform:{ticketType:"",summary:"",description:"",creator:"",ticketStatus:"",ticketSevere:"",ticketPriority:""},selectType:[],selectStatus:[],selectSevere:[],selectPriority:[],currentEditId:""}},created:function(){this.getTicketList()},methods:{formatType:function(t){var e=this.selectType.map((function(t){return t.value})).indexOf(t);return this.selectType[e].text},formatStatus:function(t){var e=this.selectStatus.map((function(t){return t.value})).indexOf(t);return this.selectStatus[e].text},formatSevere:function(t){var e=this.selectSevere.map((function(t){return t.value})).indexOf(t);return this.selectSevere[e].text},formatPriority:function(t){var e=this.selectPriority.map((function(t){return t.value})).indexOf(t);return this.selectPriority[e].text},getTicketList:function(){var t=this;k["a"].get("/api/Tickets").then((function(e){t.rows=e.data.tickets,e.data.selectType.forEach((function(e){t.selectType.push({text:e.value,value:e.tid.toString()})})),e.data.selectStatus.forEach((function(e){t.selectStatus.push({text:e.value,value:e.tid.toString()})})),e.data.selectSevere.forEach((function(e){t.selectSevere.push({text:e.value,value:e.tid.toString()})})),e.data.selectPriority.forEach((function(e){t.selectPriority.push({text:e.value,value:e.tid.toString()})}))})).catch((function(t){}))},onSubmit:function(t){var e=this;t.preventDefault(),k["a"].post("api/Tickets",this.modalform).then((function(t){e.modalShow=!1,e.onReset(),e.getTicketList(),e.$swal.fire("提示","新增成功!","success")})).catch((function(t){}))},onEdit:function(t){var e=this;t.preventDefault(),k["a"].put("api/Users/"+this.editModalform.Tid,this.editModalform).then((function(t){e.editModalShow=!1,e.onReset(),e.getUserList()})).catch((function(t){}))},onReset:function(){this.modalform=this.$options.data().modalform},editRow:function(t,e){this.editModalShow=!this.editModalShow,this.editModalform.ticketType=t.row.ticketType,this.editModalform.summary=t.row.summary,this.editModalform.description=t.row.description,this.editModalform.creator=t.row.creator,this.editModalform.ticketStatus="handle"==e?this.selectStatus[1].value:"finish"==e?this.selectStatus[2].value:t.row.ticketStatus,this.editModalform.ticketSevere=t.row.ticketSevere,this.editModalform.ticketPriority=t.row.ticketPriority},deleteRow:function(t){},onNew:function(){this.modalShow=!this.modalShow,this.modalform.creator=v["a"].state.claims.UserName,this.modalform.ticketStatus=this.selectStatus[0].value},checkRole:function(t){return"ADMINISTRATOR"==v["a"].state.claims.RoleName.toUpperCase()||("add"==t||"edit"==t||"delete"==t?"RD"!=v["a"].state.claims.RoleName.toUpperCase():"handle"==t||"finish"==t?"RD"==v["a"].state.claims.RoleName.toUpperCase():void 0)}}},S=g,y=o("2877"),w=Object(y["a"])(S,i,r,!1,null,null,null);e["default"]=w.exports},d81d:function(t,e,o){"use strict";var i=o("23e7"),r=o("b727").map,a=o("1dde"),n=o("ae40"),s=a("map"),l=n("map");i({target:"Array",proto:!0,forced:!s||!l},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,o){"use strict";var i=o("23e7"),r=o("83ab"),a=o("da84"),n=o("5135"),s=o("861d"),l=o("9bf2").f,c=o("e893"),d=a.Symbol;if(r&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(m,d);var f=m.prototype=d.prototype;f.constructor=m;var p=f.toString,b="Symbol(test)"==String(d("test")),h=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(n(u,t))return"";var o=b?e.slice(7,-1):e.replace(h,"$1");return""===o?void 0:o}}),i({global:!0,forced:!0},{Symbol:m})}}}]);
//# sourceMappingURL=chunk-5670df41.c758ed84.js.map