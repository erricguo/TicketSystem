(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0efc70"],{"9a0b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card-code",{attrs:{title:"功能表管理"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],on:{click:function(t){e.modalShow=!e.modalShow}}},[r("span",[e._v("新增")])]),r("div",{staticClass:"custom-search d-flex justify-content-end"},[r("b-form-group",[r("div",{staticClass:"d-flex align-items-center"},[r("label",{staticClass:"mr-1",staticStyle:{"min-width":"max-content"}},[e._v("查詢")]),r("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"Search",type:"text"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}})],1)])],1),r("vue-good-table",{attrs:{columns:e.columns,rows:e.rows,"group-options":{enabled:!0,collapsable:!0},"search-options":{enabled:!0,externalQuery:e.searchTerm},"pagination-options":{enabled:!0,perPage:e.pageLength}},scopedSlots:e._u([{key:"table-row",fn:function(t){return["action"===t.column.field?r("span",[r("span",[r("b-button",{staticClass:"mr-50",attrs:{variant:"gradient-primary"},on:{click:function(r){return e.editRow(t)}}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"Edit2Icon"}}),r("span",[e._v("編輯")])],1),r("b-button",{attrs:{variant:"gradient-danger"}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"TrashIcon"}}),r("span",[e._v("刪除")])],1)],1)]):e._e()]}},{key:"pagination-bottom",fn:function(t){return[r("div",{staticClass:"d-flex justify-content-between flex-wrap"},[r("div",{staticClass:"d-flex align-items-center mb-0 mt-1"},[r("span",{staticClass:"text-nowrap "},[e._v(" Showing 1 to ")]),r("b-form-select",{staticClass:"mx-1",attrs:{options:["10","20","50"]},on:{input:function(e){return t.perPageChanged({currentPerPage:e})}},model:{value:e.pageLength,callback:function(t){e.pageLength=t},expression:"pageLength"}}),r("span",{staticClass:"text-nowrap"},[e._v(" of "+e._s(t.total)+" entries ")])],1),r("div",[r("b-pagination",{staticClass:"mt-1 mb-0",attrs:{value:1,"total-rows":t.total,"per-page":e.pageLength,"first-number":"","last-number":"",align:"right","prev-class":"prev-item","next-class":"next-item"},on:{input:function(e){return t.pageChanged({currentPage:e})}},scopedSlots:e._u([{key:"prev-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}],null,!0)})],1)])]}}])}),r("b-modal",{attrs:{id:"newRoleModal",centered:""},on:{ok:e.onSubmit},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[r("b-card-code",{attrs:{title:"新增選單"}},[r("b-form",[r("b-form-group",{attrs:{id:"input-group-5",label:"層級","label-for":"input-5"}},[r("b-form-select",{attrs:{id:"input-5",options:e.selectParent,required:""},model:{value:e.modalform.ParentTid,callback:function(t){e.$set(e.modalform,"ParentTid",t)},expression:"modalform.ParentTid"}})],1),r("b-form-group",{attrs:{id:"input-group-1",label:"名稱","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"email",required:""},model:{value:e.modalform.Name,callback:function(t){e.$set(e.modalform,"Name",t)},expression:"modalform.Name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"資源路徑","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",required:""},model:{value:e.modalform.Url,callback:function(t){e.$set(e.modalform,"Url",t)},expression:"modalform.Url"}})],1),r("b-form-group",{attrs:{id:"input-group-3",label:"排序","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",required:""},model:{value:e.modalform.OrderRule,callback:function(t){e.$set(e.modalform,"OrderRule",t)},expression:"modalform.OrderRule"}})],1)],1)],1)],1),r("b-modal",{attrs:{id:"editRoleModal",centered:""},on:{ok:e.onEdit},model:{value:e.editModalShow,callback:function(t){e.editModalShow=t},expression:"editModalShow"}},[r("b-card-code",{attrs:{title:"修改角色"}},[r("b-form",[r("b-form-group",{attrs:{id:"input-group-5",label:"層級","label-for":"input-5"}},[r("b-form-select",{attrs:{id:"input-5",options:e.selectParent,required:""},model:{value:e.editModalform.ParentTid,callback:function(t){e.$set(e.editModalform,"ParentTid",t)},expression:"editModalform.ParentTid"}})],1),r("b-form-group",{attrs:{id:"input-group-1",label:"名稱","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",required:""},model:{value:e.editModalform.Name,callback:function(t){e.$set(e.editModalform,"Name",t)},expression:"editModalform.Name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"資源路徑","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",required:""},model:{value:e.editModalform.Url,callback:function(t){e.$set(e.editModalform,"Url",t)},expression:"editModalform.Url"}})],1),r("b-form-group",{attrs:{id:"input-group-3",label:"排序","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",required:""},model:{value:e.editModalform.OrderRule,callback:function(t){e.$set(e.editModalform,"OrderRule",t)},expression:"editModalform.OrderRule"}})],1)],1)],1)],1)],1)},o=[],i=(r("d3b7"),r("159b"),r("b0c0"),r("541c")),n=r("1947"),l=r("e8a3"),d=r("e98b"),s=r("26d2"),u=r("8226"),m=r("4797"),c=r("8361"),f=r("dd9a"),p=r("9eaa"),h=r("11de"),b=r("f617"),g=(r("4360"),r("42ea"));r("3e84");var v={components:{BCardCode:i["a"],VueGoodTable:b["a"],BButton:n["a"],BAvatar:l["a"],BBadge:d["a"],BPagination:s["a"],BFormGroup:u["a"],BFormInput:m["a"],BFormSelect:c["a"],BDropdown:f["a"],BDropdownItem:p["a"],BForm:h["a"]},data:function(){return{pageLength:10,dir:!1,columns:[{label:"名稱",field:"name"},{label:"資源路徑",field:"url"},{label:"排序",field:"orderRule"},{label:"階層",field:"level"},{label:"操作",field:"action"}],rows:[],searchTerm:"",childrenList:[],modalShow:!1,editModalShow:!1,modalform:{ParentTid:"",Name:"",Url:"",OrderRule:"",Level:""},editModalform:{Tid:"",ParentTid:"",Name:"",Url:"",OrderRule:"",Level:""},selectParent:[{text:"最上層",value:0}]}},computed:{},created:function(){this.getParentList(),this.getMenuList()},methods:{getMenuList:function(){var e=this;g["a"].get("/api/Menus").then((function(t){e.rows=[],t.data.forEach((function(t){var r=[];e.getChildren(t.children,r,t.tid),e.rows.push({tid:t.tid,parentTid:t.parentTid,name:t.name,url:t.url,orderRule:t.orderRule,level:t.level,children:r})}));var r=e.rows;console.log(r)})).catch((function(e){}))},getParentList:function(){var e=this;g["a"].get("/api/Menus/Parent").then((function(t){t.data.forEach((function(t){e.selectParent.push({value:t.tid,text:t.name})}))})).catch((function(e){}))},getChildren:function(e,t,r){var a=this,o=[];e.forEach((function(e){e.children.length>0&&a.getChildren(e.children,o,e.tid),o.length<=0?t.push({tid:e.tid,parentTid:r,name:e.name,url:e.url,orderRule:e.orderRule,level:e.level}):t.push({tid:e.tid,parentTid:r,name:e.name,url:e.url,orderRule:e.orderRule,level:e.level,children:o}),o=[]}))},onSubmit:function(e){var t=this;e.preventDefault(),g["a"].post("/api/Menus",{Name:this.modalform.Name,Url:this.modalform.Url,OrderRule:this.modalform.OrderRule,Level:this.modalform.Level,ParentTid:this.modalform.ParentTid}).then((function(e){t.modalShow=!1,t.onReset(),t.getMenuList()})).catch((function(e){t.$swal.fire("錯誤","新增失敗! 請稍後再試","error")}))},onEdit:function(e){var t=this;e.preventDefault(),g["a"].patch("/api/Menus/"+this.editModalform.Tid,{Name:this.editModalform.Name,Url:this.editModalform.Url,OrderRule:this.editModalform.OrderRule,Level:this.editModalform.Level,ParentTid:this.editModalform.ParentTid}).then((function(e){t.editModalShow=!1,t.onReset(),t.getMenuList()})).catch((function(e){t.$swal.fire("錯誤","新增失敗! 請稍後再試","error")}))},onReset:function(){this.modalform=this.$options.data().modalform,this.editModalform=this.$options.data().editModalform},editRow:function(e){this.editModalShow=!this.editModalShow,this.editModalform.Tid=e.row.tid,this.editModalform.Name=e.row.name,this.editModalform.Url=e.row.url,this.editModalform.OrderRule=e.row.orderRule,this.editModalform.ParentTid=e.row.parentTid}}},w=v,M=r("2877"),x=Object(M["a"])(w,a,o,!1,null,null,null);t["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d0efc70.9cf54c67.js.map